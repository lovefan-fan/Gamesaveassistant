# æ¸¸æˆå­˜æ¡£è‡ªåŠ¨å¤‡ä»½åŠ©æ‰‹ - ç½‘ç»œåŒæ­¥ç‰ˆ

<div align="center">

![Version](https://img.shields.io/badge/version-1.5-blue)
![Python](https://img.shields.io/badge/python-3.8%2B-green)
![License](https://img.shields.io/badge/license-MIT-lightgrey)
![Docker](https://img.shields.io/badge/docker-supported-blue)

**è‡ªåŠ¨å¤‡ä»½æ¸¸æˆå­˜æ¡£ï¼Œæ”¯æŒå¤šè®¾å¤‡ç½‘ç»œåŒæ­¥**

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—) â€¢ [Dockeréƒ¨ç½²](#-dockeréƒ¨ç½²) â€¢ [APIæ–‡æ¡£](#-apiæ–‡æ¡£)

</div>

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªæ¸¸æˆå­˜æ¡£è‡ªåŠ¨å¤‡ä»½å·¥å…·ï¼Œæ”¯æŒå¤šè®¾å¤‡ç½‘ç»œåŒæ­¥ã€‚

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… **è‡ªåŠ¨ç›‘æ§**ï¼šæ¸¸æˆå…³é—­æ—¶è‡ªåŠ¨å¤‡ä»½å­˜æ¡£
- âœ… **ç½‘ç»œåŒæ­¥**ï¼šå¤šå°ç”µè„‘ä¹‹é—´åŒæ­¥é…ç½®
- âœ… **å¤šç”¨æˆ·æ”¯æŒ**ï¼šä¸åŒç”¨æˆ·ç‹¬ç«‹é…ç½®
- âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šé˜²æ­¢é…ç½®å†²çª
- âœ… **Dockeréƒ¨ç½²**ï¼šä¸€é”®éƒ¨ç½²æœåŠ¡å™¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®¢æˆ·ç«¯ä¾èµ–
pip install requests psutil python-dotenv

# æœåŠ¡å™¨ä¾èµ–ï¼ˆå¯é€‰ï¼‰
cd server
pip install flask
```

### 2. å¯åŠ¨æœåŠ¡å™¨

**æ–¹å¼Aï¼šDockerï¼ˆæ¨èï¼‰**
```bash
cd server
cp .env.example .env
# ç¼–è¾‘ .env ä¿®æ”¹ ADMIN_PASSWORD
docker-compose up -d
```

**æ–¹å¼Bï¼šæœ¬åœ°è¿è¡Œ**
```bash
cd server
python server.py
```

### 3. é…ç½®å®¢æˆ·ç«¯

æ‰“å¼€æ¸¸æˆå­˜æ¡£åŠ©æ‰‹ â†’ ç‚¹å‡» **ã€ç½‘ç»œè®¾ç½®ã€‘**ï¼š
- â˜‘ï¸ å¯ç”¨ç½‘ç»œåŒæ­¥
- æœåŠ¡å™¨åœ°å€ï¼š`http://æœåŠ¡å™¨IP:5000`
- ç”¨æˆ·IDï¼šä»»æ„æ ‡è¯†ï¼ˆå¦‚ `user1`ï¼‰
- ç‚¹å‡» **ã€æµ‹è¯•è¿æ¥ã€‘**
- ç‚¹å‡» **ã€ä¿å­˜é…ç½®ã€‘**

### 4. åŒæ­¥é…ç½®

ç‚¹å‡» **ã€åŒæ­¥ç®¡ç†ã€‘**ï¼š
- **æ‹‰å–é…ç½®**ï¼šä»æœåŠ¡å™¨ä¸‹è½½é…ç½®
- **æ¨é€é…ç½®**ï¼šä¸Šä¼ æœ¬åœ°é…ç½®åˆ°æœåŠ¡å™¨
- **åŒå‘åŒæ­¥**ï¼šå…ˆä¸Šä¼ åä¸‹è½½ï¼Œè‡ªåŠ¨åˆå¹¶

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æµç¨‹

```
å¯åŠ¨æœåŠ¡å™¨ â†’ é…ç½®å®¢æˆ·ç«¯ â†’ æ·»åŠ æ¸¸æˆ â†’ è‡ªåŠ¨å¤‡ä»½ â†’ åŒæ­¥é…ç½®
```

### å¤šè®¾å¤‡åŒæ­¥ç¤ºä¾‹

**ç”µè„‘Aï¼ˆå®¶é‡Œï¼‰ï¼š**
1. æ·»åŠ æ¸¸æˆ"è‰¾å°”ç™»æ³•ç¯"
2. ã€ç½‘ç»œè®¾ç½®ã€‘â†’ æœåŠ¡å™¨ï¼š`http://192.168.1.100:5000`ï¼Œç”¨æˆ·IDï¼š`user1`
3. ã€åŒæ­¥ç®¡ç†ã€‘â†’ã€æ¨é€é…ç½®ã€‘

**ç”µè„‘Bï¼ˆå…¬å¸ï¼‰ï¼š**
1. ã€ç½‘ç»œè®¾ç½®ã€‘â†’ ç›¸åŒæœåŠ¡å™¨å’Œç”¨æˆ·ID
2. ã€åŒæ­¥ç®¡ç†ã€‘â†’ã€æ‹‰å–é…ç½®ã€‘
3. æˆåŠŸè·å–é…ç½®

### å¤šç”¨æˆ·åœºæ™¯

| åœºæ™¯ | ç”¨æˆ·ID | è¯´æ˜ |
|------|--------|------|
| ä¸ªäººå¤šè®¾å¤‡ | `user1` | å®¶é‡Œ/å…¬å¸ç”µè„‘åŒæ­¥ |
| å›¢é˜Ÿå…±äº« | `team1` | å¤šäººå…±äº«é…ç½® |
| å¤šå›¢é˜Ÿ | `teamA`, `teamB` | ç‹¬ç«‹é…ç½® |

---

## ğŸ³ Docker éƒ¨ç½²

### å¿«é€Ÿéƒ¨ç½²

```bash
cd server
cp .env.example .env
# ç¼–è¾‘ .env è®¾ç½®å¯†ç 
docker-compose up -d
```

### å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `docker-compose up -d` | å¯åŠ¨æœåŠ¡ |
| `docker-compose down` | åœæ­¢æœåŠ¡ |
| `docker-compose logs -f` | æŸ¥çœ‹æ—¥å¿— |
| `docker-compose restart` | é‡å¯æœåŠ¡ |
| `docker-compose build --no-cache` | å¼ºåˆ¶é‡æ–°æ„å»º |

### ç¯å¢ƒå˜é‡

ç¼–è¾‘ `server/.env`ï¼š

```env
# ç®¡ç†å¯†ç ï¼ˆå¿…å¡«ï¼Œå¿…é¡»ä¿®æ”¹ï¼‰
ADMIN_PASSWORD=your_secure_password
```

### é•œåƒä¼˜åŒ–è¯´æ˜

**å¤šé˜¶æ®µæ„å»ºä¼˜åŠ¿ï¼š**
- âœ… **ä½“ç§¯å°**ï¼šæœ€ç»ˆé•œåƒä»…åŒ…å«è¿è¡Œæ—¶ä¾èµ–ï¼ˆçº¦ 80MBï¼‰
- âœ… **å®‰å…¨æ€§é«˜**ï¼šæ„å»ºå·¥å…·ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆé•œåƒä¸­
- âœ… **å¯åŠ¨å¿«**ï¼šç²¾ç®€çš„è¿è¡Œç¯å¢ƒ

**é•œåƒå¤§å°å¯¹æ¯”ï¼š**
- ä¼˜åŒ–å‰ï¼š~300MB+
- ä¼˜åŒ–åï¼š~80MB

### æ•°æ®æŒä¹…åŒ–

æ•°æ®å­˜å‚¨åœ¨ `server/server_data/` ç›®å½•ï¼š
- `config.json` - é…ç½®æ•°æ®
- `version.txt` - ç‰ˆæœ¬å·
- `devices.json` - è®¾å¤‡è®°å½•

**å¤‡ä»½ï¼š**
```bash
cd server
tar -czf backup.tar.gz server_data/
```

---

## ğŸ”§ é¡¹ç›®ç»“æ„

```
Gamesaveassistant/
â”œâ”€â”€ code/
â”‚   â””â”€â”€ run.py                    # å®¢æˆ·ç«¯ä¸»ç¨‹åºï¼ˆå·²é›†æˆç½‘ç»œåŒæ­¥ï¼‰
â”‚
â”œâ”€â”€ server/                       # æœåŠ¡å™¨ç«¯
â”‚   â”œâ”€â”€ Dockerfile               # Dockeré•œåƒ
â”‚   â”œâ”€â”€ docker-compose.yml       # Composeé…ç½®
â”‚   â”œâ”€â”€ server.py                # FlaskæœåŠ¡å™¨
â”‚   â”œâ”€â”€ requirements.txt         # ä¾èµ–
â”‚   â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â”œâ”€â”€ å®‰è£…ä¾èµ–.bat            # Windowså®‰è£…è„šæœ¬
â”‚   â””â”€â”€ å¯åŠ¨æœåŠ¡å™¨.bat          # Windowså¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ config.json              # æ¸¸æˆé…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ network_config.json      # ç½‘ç»œé…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ server_data/                  # æœåŠ¡å™¨æ•°æ®ï¼ˆDockerè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ config.json
â”‚   â”œâ”€â”€ version.txt
â”‚   â””â”€â”€ devices.json
â”‚
â”œâ”€â”€ README.md                     # æœ¬æ–‡æ¡£
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ .gitignore                   # å¿½ç•¥è§„åˆ™
```

---

## ğŸ“ é…ç½®è¯´æ˜

### å®¢æˆ·ç«¯é…ç½® (`data/network_config.json`)

```json
{
    "enabled": true,
    "server_url": "http://192.168.1.100:5000",
    "user_id": "user1",
    "machine_id": "abc123def456",
    "sync_interval": 300,
    "last_version": 124
}
```

### æœåŠ¡å™¨é…ç½® (`server_data/`)

```json
// config.json
{
    "é­”æ³•": ["Magicraft.exe", "{USERPROFILE}\\...", "", "é­”æ³•\\magicraft.zip"]
}

// version.txt
124

// devices.json
[{
    "machine_id": "abc123",
    "last_sync": "2026-01-04 15:30:00",
    "last_version": 124,
    "sync_count": 5
}]
```

---

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### ç‰ˆæœ¬æ§åˆ¶

```
å®¢æˆ·ç«¯ç‰ˆæœ¬: 123
æœåŠ¡å™¨ç‰ˆæœ¬: 125
â†’ æç¤ºï¼šç‰ˆæœ¬è¿‡æ—§ï¼Œå…ˆæ‹‰å–
â†’ æ‹‰å–åç‰ˆæœ¬: 125
â†’ ä¿®æ”¹åæ¨é€: 126
```

### å†²çªå¤„ç†

- **åŒä¸€æ¸¸æˆè¢«ä¿®æ”¹**ï¼šä»¥æœ€æ–°æ¨é€ä¸ºå‡†
- **ä¸åŒæ¸¸æˆ**ï¼šè‡ªåŠ¨åˆå¹¶
- **ç‰ˆæœ¬è½å**ï¼šæç¤ºå…ˆæ‹‰å–

### ç”¨æˆ·è¯†åˆ«

- **user_id**ï¼šç”¨æˆ·è‡ªå®šä¹‰ï¼ŒåŒºåˆ†ä¸åŒç”¨æˆ·
- **machine_id**ï¼šè‡ªåŠ¨ç”Ÿæˆï¼ŒåŒºåˆ†ä¸åŒè®¾å¤‡

---

## ğŸ“š API æ–‡æ¡£

### å¥åº·æ£€æŸ¥
```bash
GET /api/health
# å“åº”ï¼š{"status":"ok","version":"1.0.0"}
```

### åŒæ­¥é…ç½®ï¼ˆæ‹‰å–ï¼‰
```bash
POST /api/config/sync/{user_id}
Body: {"local_version": 123, "machine_id": "abc123"}

# å“åº”ï¼ˆæœ‰æ›´æ–°ï¼‰ï¼š
{"updated": true, "config": {...}, "version": 124}

# å“åº”ï¼ˆæ— æ›´æ–°ï¼‰ï¼š
{"updated": false}
```

### æ¨é€é…ç½®
```bash
POST /api/config/push/{user_id}
Body: {"config": {...}, "local_version": 123, "machine_id": "abc123"}

# å“åº”ï¼ˆæˆåŠŸï¼‰ï¼š
{"success": true, "new_version": 124}

# å“åº”ï¼ˆç‰ˆæœ¬è¿‡æ—§ï¼‰ï¼š
{"success": false, "message": "æœ¬åœ°ç‰ˆæœ¬è¿‡æ—§", "server_version": 124}
```

### æŸ¥çœ‹è®¾å¤‡
```bash
GET /api/devices/{user_id}
# å“åº”ï¼š{"user_id": "user1", "devices": [...]}
```

### ç®¡ç†æ¥å£ï¼ˆéœ€è¦å¯†ç ï¼‰
```bash
# æŸ¥çœ‹ä¿¡æ¯
GET /api/admin/info?secret=YOUR_PASSWORD

# æ¸…ç©ºæ•°æ®
POST /api/admin/clear?secret=YOUR_PASSWORD
```

---

## âš ï¸ å®‰å…¨æé†’

### å¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç ï¼

**æœåŠ¡å™¨éƒ¨ç½²æ—¶ï¼Œå¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

```bash
# ç¼–è¾‘ server/.env
ADMIN_PASSWORD=Your_Complex_Password_123!@#

# é‡å¯æœåŠ¡
cd server
docker-compose down && docker-compose up -d
```

### å®‰å…¨å»ºè®®

1. âœ… ä¿®æ”¹é»˜è®¤ç®¡ç†å¯†ç 
2. âœ… ä»…åœ¨å†…ç½‘éƒ¨ç½²ï¼Œä¸è¦æš´éœ²å…¬ç½‘
3. âœ… ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®
4. âœ… å®šæœŸå¤‡ä»½æ•°æ®
5. âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ— æ³•è¿æ¥æœåŠ¡å™¨ï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
- æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼Ÿ
- IPåœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ
- ç«¯å£æ˜¯å¦å¼€æ”¾ï¼Ÿ
- é˜²ç«å¢™æ˜¯å¦é˜»æŒ¡ï¼Ÿ

**æµ‹è¯•ï¼š**
```bash
curl http://æœåŠ¡å™¨IP:5000/api/health
```

### Q: ç‰ˆæœ¬å†²çªæ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ³•ï¼š**
1. å…ˆç‚¹å‡»ã€æ‹‰å–é…ç½®ã€‘
2. å†è¿›è¡Œä¿®æ”¹
3. æœ€åã€æ¨é€é…ç½®ã€‘

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

**å®¢æˆ·ç«¯ï¼š** å¤åˆ¶ `data/` ç›®å½•
**æœåŠ¡å™¨ï¼š** å¤åˆ¶ `server_data/` ç›®å½•

### Q: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ

**æœåŠ¡å™¨ï¼š**
```bash
docker-compose logs -f
```

**å®¢æˆ·ç«¯ï¼š** æŸ¥çœ‹ç¨‹åºæ—¥å¿—çª—å£

---

## ğŸ‰ æ›´æ–°æ—¥å¿—

### v1.5 - 2026-01-04
- âœ¨ æ–°å¢ç½‘ç»œåŒæ­¥åŠŸèƒ½
- âœ¨ æ–°å¢Dockeréƒ¨ç½²æ”¯æŒ
- âœ¨ æ–°å¢å¤šç”¨æˆ·æ”¯æŒ
- âœ¨ æ–°å¢ç‰ˆæœ¬æ§åˆ¶
- ğŸ“ å®Œå–„æ–‡æ¡£

### v1.4 - åŸå§‹ç‰ˆæœ¬
- âœ… è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½
- âœ… æ‰‹åŠ¨å¤‡ä»½/æ¢å¤
- âœ… æ¸¸æˆç›‘æ§
- âœ… å¯ç§»æ¤è·¯å¾„

---

## ğŸ“„ å¼€æºåè®®

MIT License

---

## ğŸ¤ è”ç³»æ–¹å¼

- GitHub: https://github.com/yxsj245/Gamesaveassistant
- Gitee: https://gitee.com/xiao-zhu245/Gamesaveassistant

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ®âœ¨
